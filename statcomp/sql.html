<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Statistical Computing</title>

    <meta name="author" content="Xi (Rossi) LUO">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="reveal.js.4.1.3/dist/reset.css">
    <link rel="stylesheet" href="reveal.js.4.1.3/dist/reveal.css">
    <!-- <link rel="stylesheet" href="reveal.js.4.1.3/dist/theme/white.css" id="theme"> -->



    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="reveal.js.4.1.3/plugin/highlight/github-dark-dimmed.min.css">
    <!--
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
-->
    <link rel="stylesheet" href="./css/rossisimple.css" id="theme">
    <!--    <link rel="stylesheet" href="./css/brightRoom.css" id="theme">-->
</head>

<body>

    <div class="reveal">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">

            <!--      place holder for credits: empty for now -->
            <credit></credit>
            <section>
                <h1><strong>
                        <highlight>Statistical</highlight>
                        <emph>Computing</emph>
                    </strong></h1>
                <br>
                <h2>SQL</h2>
                <br>

                <h3>Xi (Rossi) <strong>LUO</strong></h3>
                <br>
                <p><small>Department of Biostatistics and Data Science<br>
                        School of Public Health<br>The University of Texas Health Science Center at Houston</small></p>
            </section>


            <section>
                <h2>Why SQL?</h2>
                <ul>
                    <li>File storage donâ€™t scale well with data size
                    </li>
                    <li>Database is efficient for storing regular data (tables) with <emph>relations</emph>
                        <ul>
                            <li>Images, videos are still normally stored as files but the catalog of files is in a
                                database
                            </li>
                        </ul>
                    </li>
                    <li>Decades of improvements by database management systems
                    </li>
                </ul>
            </section>


            <section>
                <h2>Operations/Transactions in Databases</h2>
                <ul>
                    <li>Create</li>
                    <li>Read</li>
                    <li>Update</li>
                    <li>Delete</li>
                </ul>
            </section>

            <section>
                <ul>Availability and Security</ul>
                <ul>
                    <li>Atomicity: if part of operations failed, return database to its original state prior to the
                        operations</li>
                    <li>Consistency: records must be valid according to rules</li>
                    <li>Isolation: transactions executed in parallel</li>
                    <li>Durability: once transactions committed, they should stay committed</li>
                </ul>
            </section>

            <section>
                <h2>Relational Dataabases</h2>
                <ul>
                    <li>Started by a paper (Codd 1970)</li>
                    <li>Collection of multiple tables <emph>linked</emph> by specific attributes (e.g. IDs)</li>
                    <li>Interested in relations not just individual datasets</li>
                    <li>By normalization, data reduced to multiple tables to reduce redundancy</li>
                </ul>
            </section>

            <section data-state="rds_db">
                <h2>Example</h2>
                <img src="https://d33wubrfki0l68.cloudfront.net/245292d1ea724f6c3fd8a92063dcd7bfb9758d02/5751b/diagrams/relational-nycflights.png"
                    width="75%" alt="">
                <style>
                    .rds_db credit:after {
                        content: "https://r4ds.had.co.nz/relational-data.html";
                    }
                </style>
            </section>

            <section>
                <h2>Keys</h2>
                <ul>
                    <li>Primary key: uniquely identify a row in current table
                        <ul>
                            <li>tailnum is primary key in table planes</li>
                        </ul>
                    </li>
                    <li>Foriegn key: uniquely identify a row in another table
                        <ul>
                            <li>tailnum is foriegn key in table flights</li>
                        </ul>
                    </li>
                    <li>Variable can be both PK and FK
                    </li>
                    <li>PK and FK form a relation, typically one-to-many
                        <ul>
                            <li>Each flight has one plane but one plane can serve multiple flights</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section>
                <h2>Database vs Files</h2>
                <ul>
                    <li>Scale: most cases; super big: NoSQL, Hadoop </li>
                    <li>Concurrent transactions: central server for multiple users</li>
                    <li>Efficiency: slicing data, joining tables, updates...</li>
                    <li>Robustness: backups, logs</li>
                    <li>Multiple interfaces: R, Python, JAVA, ... </li>
                </ul>
            </section>

            <section>
                <h1>RDBMS</h1>
            </section>

            <section>
                <h2>Relational Database Management System</h2>
                <ul>
                    <li>RDBMS is a system based on the relational model
                    </li>
                    <li>A decorative model which uses descriptive languages to locate where data are
                        <ul>
                            <li>Give me the data on incomes of Texans, between 2019-2020, in Houston,...</li>
                            <li>Instead of writing if person in Houston and yeear ....</li>
                        </ul>
                    </li>
                    <li>There are efficient computational algorithms (ex. trees) to extract the specific data based on
                        the descriptions
                    </li>
                    <li>Most DBs used nowadays are relational</li>
                </ul>
            </section>

            <section>
                <h2>High Level Overview</h2>
                <img src="img/db_high_level_overview.png" alt="">
            </section>

            <section data-state="mysql_design">
                <h2>Example: MySQL</h2>
                <img src="https://dev.mysql.com/doc/refman/8.0/en/images/mysql-architecture.png" width="50%" alt="">
                <style>
                    .mysql_design credit:after {
                        content: "https://dev.mysql.com/doc/refman/8.0/en/pluggable-storage-overview.html";
                    }
                </style>
            </section>


            <section>
                <h2>Data Description: SQL</h2>
                <ul>
                    <li>SQL (Structured Query Language) is a language for describing the data
                    </li>
                    <li>Most SQL language features are universal across different implementations
                        <ul>
                            <li>Oracle, Microsoft SQL, MySQL, IBM DB2, PostgreSQL
                            </li>
                        </ul>
                    </li>
                    <li>The implementations mostly differ in speed, scale, stability, and user interfaces</li>
                </ul>
            </section>

            <section>
                <h2>Disadvantages</h2>
                <ul>
                    <li>Infrastructure</li>
                    <li>Human resources</li>
                    <li>Learning curve (today)</li>
                </ul>
            </section>

            <section>
                <h1>SQL</h1>
            </section>





            <section>
                <h2>Example</h2>
                <pre><code data-trim data-noescape class="language-bash">
                    # Concatenate files 
                    cp ss13husa.csv ss13hus_all2.csv
                    tail -n +2 ss13husb.csv >> ss13hus_all2.csv
                    tail -n +2 ss13husc.csv >> ss13hus_all2.csv
                    tail -n +2 ss13husd.csv >> ss13hus_all2.csv
                </code></pre>
                <p>Quick check of rows</p>
                <pre><code data-trim data-noescape class="language-bash">
                    % wc -l ss13hus_all.csv
                    7219001 ss13hus_all.csv
                </code></pre>
            </section>


            <section>
                <h2>NoSQL (Not Only SQL)</h2>
                <ul>
                    <li>SQL doest not scale well with big data</li>
                    <li>Speed and rise of in-memory databases</li>
                    <li>Data that don't fit relational structure well, (e.g. tweets)</li>
                </ul>
            </section>

            <section>
                <h2>References</h2>
                <ul>
                    <li>R for DS: ch 10</li>
                    <li>https://link.springer.com/book/10.1007%2F978-1-4471-5601-7</li>
                </ul>
            </section>

        </div>
    </div>

    <script src="reveal.js.4.1.3/dist/reveal.js"></script>
    <script src="reveal.js.4.1.3/plugin/zoom/zoom.js"></script>
    <script src="reveal.js.4.1.3/plugin/notes/notes.js"></script>
    <script src="reveal.js.4.1.3/plugin/search/search.js"></script>
    <script src="reveal.js.4.1.3/plugin/markdown/markdown.js"></script>
    <script src="reveal.js.4.1.3/plugin/highlight/highlight.js"></script>
    <script src="reveal.js.4.1.3/plugin/math/math.js"></script>

    <script>
        // Also available as an ES module, see:
        // https://revealjs.com/initialization/
        Reveal.initialize({
            controls: false,
            progress: true,
            center: true,
            hash: true,
            transition: 'slide', // none/fade/slide/convex/concave/zoom

            width: 1024,
            height: 768,

            slideNumber: 'c/t',

            math: {
                // mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                config: 'TeX-AMS_HTML-full',
                TeX: {
                    Macros: {
                        R: '\\mathbb{R}',
                        set: ['\\left\\{#1 \\; ; \\; #2\\right\\}', 2]
                    }
                }
            },

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealMath, RevealHighlight]
        });

    </script>

</body>

</html>