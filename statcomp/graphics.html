<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Statistical Computing</title>

    <meta name="author" content="Xi (Rossi) LUO">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="reveal.js.4.1.3/dist/reset.css">
    <link rel="stylesheet" href="reveal.js.4.1.3/dist/reveal.css">
    <!-- <link rel="stylesheet" href="reveal.js.4.1.3/dist/theme/white.css" id="theme"> -->



    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="reveal.js.4.1.3/plugin/highlight/github-dark-dimmed.min.css">
    <!--
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
-->
    <link rel="stylesheet" href="./css/rossisimple.css" id="theme">
    <!--    <link rel="stylesheet" href="./css/brightRoom.css" id="theme">-->
</head>

<body>

    <div class="reveal">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">

            <!--      place holder for credits: empty for now -->
            <credit></credit>
            <!-- <style>
                .rds_db credit:after {
                    content: "https://r4ds.had.co.nz/relational-data.html";
                }
            </style> -->
            <section>
                <h1><strong>
                        <highlight>Statistical</highlight>
                        <emph>Computing</emph>
                    </strong></h1>
                <br>
                <h2>Graphics</h2>
                <br>

                <h3>Xi (Rossi) <strong>LUO</strong></h3>
                <br>
                <p><small>Department of Biostatistics and Data Science<br>
                        School of Public Health<br>The University of Texas Health Science Center at Houston</small></p>
            </section>


            <section>
                <h2>R Graphics</h2>
                <ul>
                    <li>Rich set of customizable options
                    </li>
                    <li>Default plots may look terrible</li>
                    <li>Need some work to improve plots: design and color</li>
                </ul>
            </section>


            <section>
                <h2>plot()</h2>
                <ul>
                    <li>Generic function, actual function called depends on class</li>
                    <li>Default plots should almost never be used for high profile publications</li>
                </ul>
            </section>


            <section>
                <h2>Basic Plot Components</h2>
                <img src="img/basic_r_plot.png" width="65%" alt="">
            </section>

            <section>
                <h2>Windows</h2>
                <ul>
                    <li>Linux, <emphcode>X11()</emphcode>
                    </li>
                    <li>Mac, <emphcode>quartz()</emphcode>
                    </li>
                    <li>Windows, <emphcode>windows()</emphcode>
                    </li>
                </ul>
            </section>

            <section>
                <h2>Multiple Lines/Points</h2>
                <ul>
                    <li>
                        <emphcode>plot()</emphcode> creates a new plotting box, except when sometimes <emphcode>add=TRUE
                        </emphcode> is allowed
                    </li>
                    <li>
                        <emphcode>lines(), ablines(), points()...</emphcode> add more lines/points to the current box,
                        without creating a new one
                    </li>
                </ul>
            </section>

            <section>
                <h2>text()</h2>
                <ul>
                    <li>Used to add text to plot</li>
                    <li>Together with <emphcode>locator(1)</emphcode> to pinpoint locations anywhere and add text
                        <ul>
                            <li>
                                <emphcode>text(locator(1), 'your text')</emphcode>
                            </li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section>
                <h2>Example</h2>
                <pre><code data-trim data-noescape class="language-r">
                    plot(0:10, 0:10,  xlab="X", ylab="Y")
                    text(7, 7, adj=2, 'Point')
                    abline(c(3,1), col='blue')
                    text(2, 5, "Line", col='blue')
                    text(5,5, "Plot", col="red", cex=2)
                    box(col="red")
                 </code></pre>
            </section>

            <section>
                <img src="img/basic_r_plot.png" width="65%" alt="">
            </section>

            <section>
                <h2>Good Practice</h2>
                <ul>
                    <li>Wrap codes for plotting in another file or function</li>
                    <li>Edit the plot codes and modify as needed</li>
                    <li>Load updates via <emphcode>source</emphcode>
                    </li>
                    <li>Iterate until satisfaction</li>
                </ul>
            </section>

            <section>
                <h2>Customize Text</h2>
                <ul>
                    <li>
                        <emphcode>cex</emphcode> to specify font size, usually > 1 to make fonts larger
                    </li>
                    <li>
                        <emphcode>family</emphcode> to specify font, usually sans or Arial for most journals
                    </li>
                </ul>
            </section>



            <section>
                <h2>Range of Axes</h2>
                <ul>
                    <li>
                        <emphcode>xlim,ylim</emphcode> to specify axis ranges for x and y
                    </li>
                    <li>
                        The ranges determined by issing the first plot function, add-on plots (e.g. <emphcode>lines
                        </emphcode>) may go out of ranges
                    </li>
                    <li>Also important to set limits when multiple plots are put side-by-side </li>
                </ul>
            </section>

            <section>
                <h2>Other Functions</h2>
                <ul>
                    <li>
                        <emphcode>polygon</emphcode> for adding (filled or unfilled) polygons
                    </li>
                    <li>
                        <emphcode>lowess</emphcode> for adding smoothing lines, <emphcode>loess</emphcode> a newer
                        alternative with different options
                    </li>
                    <li>
                        <emphcode>curve</emphcode> for plotting curve functions using a formula, instead of x and y
                        values, which is similar to <emphcode>plot.function</emphcode>
                    </li>
                </ul>
            </section>


            <section>
                <h2>Legend</h2>
                <img src="img/basic_legend.png" width="65%" alt="">
            </section>

            <section>
                <h2>Legend Location</h2>
                <img src="img/legend_location.png" width="65%" alt="">
                <p>Other locations, like in outer margins, available</p>
            </section>

            <section>
                <h2>Legend Scaling</h2>
                <img src="img/legend_scaling.png" width="65%" alt="">
                <p>More examples available on <emphcode>example(legend)</emphcode>
                </p>
            </section>


            <section>
                <h2>Multiple Plots</h2>
                <p>Basic multi-plot layout (equal spaced) by</p>
                <pre><code data-trim data-noescape class="language-r">
                    par(mfrow = c(2, 3))
                    plot(1:10, 1:10, main="1")
                    ...
                </code></pre>
                <p>6 subfigures arranged by 2 rows and 3 columns. Each new plot object fills subfigures from left to
                    right, top to bottom</p>
            </section>

            <section>
                <h2>Multi-row/col Layout</h2>
                <pre><code data-trim data-noescape class="language-r">
                    attach(mtcars)
                    layout(matrix(c(1,1,2,3), 2, 2, byrow = TRUE))
                    hist(disp)
                    hist(mpg)
                    hist(wt)
                </code></pre>
            </section>

            <section>
                <img src="img/graphics_layout.png" width="65%" alt="">
            </section>

            <section>
                <h2>Fine Control</h2>
                <pre><code data-trim data-noescape class="language-r">
                    par(fig=c(0,0.8,0,0.8), new=TRUE)
                    plot(mtcars$wt, mtcars$mpg, xlab="Car Weight",
                        ylab="Miles Per Gallon")
                    par(fig=c(0,0.8,0.55,1), new=TRUE)
                    boxplot(mtcars$wt, horizontal=TRUE, axes=FALSE)
                    par(fig=c(0.65,1,0,0.8),new=TRUE)
                    boxplot(mtcars$mpg, axes=FALSE)
                </code></pre>
            </section>

            <section>
                <img src="img/graphics_fine.png" width="65%" alt="">
            </section>

            <section>
                <h2>Color</h2>
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/HSV_color_solid_cone_chroma_gray.png/1200px-HSV_color_solid_cone_chroma_gray.png"
                    alt="" width="75%">
            </section>

            <section>
                <h2>R Colors</h2>
                <ul>
                    <li>Colors represented by HEX
                        <ul>
                            <li># followed by 6 symbols (0-9, A-F)</li>
                            <li>Base-16 symbols in pairs, first pair for red value (0-255, 00-FF), second green, thir
                                blue</li>
                            <li>Two additionals (base-16) can be added for representing transprarency</li>
                        </ul>
                    </li>
                    <li>657 built-in color names, e.g. red</li>
                    <li>Can be converted to other color models
                        <ul>
                            <li>RGB: red, green, blue values</li>
                            <li>HSV: hue, saturation, value</li>
                            <li>HCL: hue, chroma, luminance</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section>
                <h2>Color Wheel</h2>
                <img src="https://upload.wikimedia.org/wikipedia/commons/8/8a/Color_circle_%28RGB%29.svg" alt=""
                    width="60%">
                <p>Top view of the HSV color cone, brightness value 255 </p>
            </section>

            <section>
                <h2>HSV</h2>
                <ul>
                    <li>Hue: angular dimension, 0 degree red, 120 green, 240 blue, 360 red</li>
                    <li>Saturation: purity of color
                    </li>
                    <li>Value: lightness</li>
                    <li>Mixing colors:
                        <ul>
                            <li>Tint: pure color + white</li>
                            <li>Tone: pure color + gray</li>
                            <li>Shade: pure color + black</li>
                        </ul>
                    </li>
                </ul>
            </section>


            <section>
                <h2>Saturation</h2>
                <br>
                <div>
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#ff0000;stroke-width:0;" />
                    </svg>
                    &nbsp;&nbsp;&nbsp;VS&nbsp;&nbsp;&nbsp;
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#D92121;stroke-width:0;" />
                    </svg>
                </div>
                <br>
                <div>
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#00ff00;stroke-width:0;" />
                    </svg>
                    &nbsp;&nbsp;&nbsp;VS&nbsp;&nbsp;&nbsp;
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#21D921;stroke-width:0;" />
                    </svg>
                </div>
                <br>
                <div>
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#0000ff;stroke-width:0;" />
                    </svg>
                    &nbsp;&nbsp;&nbsp;VS&nbsp;&nbsp;&nbsp;
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#2121D9;stroke-width:0;" />
                    </svg>
                </div>
                <br>
                <p>Default R colors (left) with full saturation may look too sharp</p>
            </section>


            <section>
                <h2>Matlab New vs Old Default Colors</h2>
                <img src="img/matlab_new_old_colors.png" alt="" width="65%">
            </section>

            <section>
                <h2>Complementary Colors</h2>
                <p>Opposite sides of the color wheel, to contrast different categories</p>
                <img src="https://static-cse.canva.com/_next/static/assets/complementary-colors.1200x690.f6aff61a6d4a050896d92666ac184888.png"
                    alt="" width="75%">
                <br>
                <svg width="100" height="40">
                    <rect width="100" height="40" style="fill:#D92121;stroke-width:0;" />
                </svg>
                &nbsp;&nbsp;&nbsp;VS&nbsp;&nbsp;&nbsp;
                <svg width="100" height="40">
                    <rect width="100" height="40" style="fill:#21D9D9;stroke-width:0;" />
                </svg>
            </section>

            <section>
                <h2>Monochromatic Colors</h2>
                <p>Different shades,tones,tints of one color, for ordinal variables or comparing too many categories</p>
                <img src="https://static-cse.canva.com/_next/static/assets/monochromatic-colors.1200x690.c7f66f1fcd6a6993b518384ac67996cf.png"
                    alt="" width="75%">
            </section>

            <section>
                <h2>Analogous Colors</h2>
                <p>Colors with close hue values, for ordinal variables or comparing too many categories</p>
                <img src="https://static-cse.canva.com/_next/static/assets/analogous-colors.1200x690.09f7dce335bf3297b64fbe9ec4107942.png"
                    alt="" width="75%">
            </section>

            <section>
                <h2>Triadic Colors</h2>
                <p>3 colors evenly spread on angles (hues), enough contrast but less than complementary</p>
                <img src="https://static-cse.canva.com/_next/static/assets/triadic-colors.1200x690.a4b8643c90eb65eeec9ee403474a8688.png"
                    alt="" width="75%">
            </section>

            <section>
                <h2>Tetradic Colors</h2>
                <p>4 colors evenly spread on angles (hues), enough contrast but less than complementary</p>
                <img src="https://static-cse.canva.com/_next/static/assets/tetradic-colors.1200x690.fccadf1e4d2ef031edc49c508d2fe2d9.png"
                    alt="" width="75%">
            </section>

            <section>
                <h2>Grayscale</h2>
                <br>
                <div>
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#ff0000;stroke-width:0;" />
                    </svg>
                    &nbsp;&nbsp;&nbsp;&rarr;&nbsp;&nbsp;&nbsp;
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#4D4D4D;stroke-width:0;" />
                    </svg>
                </div>
                <br>
                <div>
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#00ff00;stroke-width:0;" />
                    </svg>
                    &nbsp;&nbsp;&nbsp;&rarr;&nbsp;&nbsp;&nbsp;
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#969696;stroke-width:0;" />
                    </svg>
                </div>
                <br>
                <div>
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#0000ff;stroke-width:0;" />
                    </svg>
                    &nbsp;&nbsp;&nbsp;&rarr;&nbsp;&nbsp;&nbsp;
                    <svg width="100" height="40">
                        <rect width="100" height="40" style="fill:#1C1C1C;stroke-width:0;" />
                    </svg>
                </div>
                <br>
                <p>Make sure colors converted to grayscale having enough contrast, for printing and colorblind friendly
                </p>
            </section>

            <section>
                <h2>R Color Pallets</h2>
                <img src="https://www.r-graph-gallery.com/38-rcolorbrewers-palettes_files/figure-html/thecode-1.png"
                    alt="" width="60%">
            </section>

            <section>
                <pre><code data-trim data-noescape class="language-r">
                    &gt; library(RColorBrewer)
                    &gt; brewer.pal.info
                             maxcolors category colorblind
                    BrBG            11      div       TRUE
                    PiYG            11      div       TRUE
                    PRGn            11      div       TRUE
                    PuOr            11      div       TRUE
                    RdBu            11      div       TRUE
                    RdGy            11      div      FALSE
                </code></pre>
            </section>

            <section>
                <h2>Graphic Devices</h2>
                <ul>
                    <li>R displays are organized as devices</li>
                    <li>One plot can be shwon on different devices</li>
                    <li>A device can be a file or screen (default)</li>
                </ul>
            </section>

            <section>
                <pre><code data-trim data-noescape class="language-r">
                    &gt; pdf("test.pdf")
                </code></pre>
                <p>Open a device, creating a pdf file this case, as the currect device</p>
                <pre><code data-trim data-noescape class="language-r">
                    &gt; dev.list()
                    X11  pdf
                      2    3
                </code></pre>
                <p>List devices, referred to by number</p>
                <pre><code data-trim data-noescape class="language-r">
                    &gt; dev.cur()
                    pdf
                      3
                </code></pre>
                <p>Showing current device, plots go to the pdf file</p>
            </section>

            <section>
                <pre><code data-trim data-noescape class="language-r">
                    &gt; dev.set(2)
                    X11
                    2  
                </code></pre>
                <p>Set current device to screen</p>
                <pre><code data-trim data-noescape class="language-r">
                    &gt; dev.copy(which=3)
                    pdf
                      3
                </code></pre>
                <p>Copy plot from current (2) to which (3) device</p>
                <pre><code data-trim data-noescape class="language-r">
                    &gt; dev.set(3)
                    pdf
                      3
                    &gt; dev.off()
                    X11
                      2
                </code></pre>
                <p>Close current device (3)</p>
            </section>

            <section>
                <h2>3D Graphics</h2>
                <ul>
                    <li>
                        <emphcode>lattice</emphcode>: basic pkg for 3D plots
                    </li>
                    <li>
                        <emphcode>rgl</emphcode>: interactive 3D plots
                    </li>
                </ul>
            </section>


            <section>
                <h2>References</h2>
                <ul>
                    <li>R for DS: ch 10</li>
                    <li>https://www.statmethods.net/advgraphs/layout.html</li>
                    <li>https://www.canva.com/colors/color-wheel/</li>
                    <li>https://paletton.com</li>
                </ul>
            </section>

        </div>
    </div>

    <script src="reveal.js.4.1.3/dist/reveal.js"></script>
    <script src="reveal.js.4.1.3/plugin/zoom/zoom.js"></script>
    <script src="reveal.js.4.1.3/plugin/notes/notes.js"></script>
    <script src="reveal.js.4.1.3/plugin/search/search.js"></script>
    <script src="reveal.js.4.1.3/plugin/markdown/markdown.js"></script>
    <script src="reveal.js.4.1.3/plugin/highlight/highlight.js"></script>
    <script src="reveal.js.4.1.3/plugin/math/math.js"></script>

    <script>
        // Also available as an ES module, see:
        // https://revealjs.com/initialization/
        Reveal.initialize({
            controls: false,
            progress: true,
            center: true,
            hash: true,
            transition: 'slide', // none/fade/slide/convex/concave/zoom

            width: 1024,
            height: 768,

            slideNumber: 'c/t',

            math: {
                // mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                config: 'TeX-AMS_HTML-full',
                TeX: {
                    Macros: {
                        R: '\\mathbb{R}',
                        set: ['\\left\\{#1 \\; ; \\; #2\\right\\}', 2]
                    }
                }
            },

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealMath, RevealHighlight]
        });

    </script>

</body>

</html>