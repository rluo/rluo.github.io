<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Fundamentals of Data Analytics and Predictions</title>

    <meta name="author" content="Xi (Rossi) LUO">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="reveal.js/dist/reset.css">
    <link rel="stylesheet" href="reveal.js/dist/reveal.css">
    <link rel="stylesheet" href="reveal.js/dist/theme/white.css" id="theme">



    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="reveal.js/plugin/highlight/tomorrow-night-blue.css">
    <!--
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
-->
    <link rel="stylesheet" href="./css/rossisimple.css" id="theme">
    <!--    <link rel="stylesheet" href="./css/brightRoom.css" id="theme">-->
</head>

<body>

    <div class="reveal">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">


            <section>
                <h2><strong>
                        Fundamentals of
                        <highlight>Data Analytics</highlight> and
                        <emph>Predictions</emph>
                    </strong></h2>
                <br>
                <h2>Bootstrap</h2>
                <br>
                <h3>Xi (Rossi) <strong>LUO</strong></h3>
                <br>
                <p><small>Department of Biostatistics and Data Science<br>
                        School of Public Health<br>The University of Texas Health Science Center at Houston</small></p>
            </section>


            <section>
                <h2>Bootstrap</h2>
                <ul>
                    <li>The bootstrap is a flexible and powerful statistical tool that can be used to quantify the
                        uncertainty associated with a given estimator or statistical learning method
                    </li>
                    <li>For example, it can provide an estimate of the standard error of a coefficient, or a confidence
                        interval for that coefficient.
                    </li>

                </ul>
            </section>

            <section>
                <h2>Where Does the Name Come From?</h2>
                <br>
                <div class="twocol" style="width: 65%; vertical-align:middle; font-size: 80%;">
                    <ul>
                        <li>The use of the term bootstrap derives from the phrase to pull onselfup by one‚Äôs bootstraps,
                            widely thought to be based on one of the 18th century ‚ÄúThe Surprising Adventures of Barn
                            Munchausen‚Äù by Rudolph Erich Raspe:
                        </li>
                        <ul>
                            <li>The Baron had fallen to the bottom of a deep lake. Just when it looked like all was
                                lost, he
                                thought to pick himself up by his own bootstraps.
                            </li>
                        </ul>
                    </ul>
                </div>
                <div class="twocol" style="width: 33%; vertical-align: middle;">
                    <img src="img/boot_cartoon.png">
                </div>
            </section>




            <section>
                <h2>A Simple Example‚Äî1 </h2>
                <ul>
                    <li>
                        Suppose that we wish to invest a fixed sum of money in two financial assets that yield returns
                        of X and Y, respectively, where X and Y are random quantities

                    </li>
                    <li>
                        We will invest a fraction ùõº of our money in X, and will invest the remaining 1‚àíùõº in Y

                    </li>
                    <li>
                        We wish to choose ùõº to minimize the total risk, or variance, of our investment. In other words,
                        we want to minimize $ùëâùëéùëü (\alpha X+({1-\alpha)Y})$

                    </li>
                    <li>
                        One can show that the value that minimizes the risk is given by
                        <ul>
                            <li>
                                $\alpha=\frac{{\alpha_Y}^2-\alpha_{XY}}{{\alpha_X}^2+{\alpha_Y}^2-2\alpha_{XY}}$
                            </li>
                            <li>where ${\alpha_X}^2=Var(x)$, ${\alpha_Y}^2=Var(Y)$ and ${\alpha_{XY}}^2=Cov(XY)$</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section>
                <h2>A simple example-2</h2>
                <ul>
                    <li>But the values of ${\alpha_X}^2$,$ {\alpha_Y}^2$, and ${\alpha_{XY}}^2$are unknown

                    </li>
                    <li>We can compute estimates for these quantities, $\hat{{\alpha_X}}^2$,$\hat{{\alpha_Y}}^2$, and
                        $\hat{{\alpha_{XY}}}^2$, using a data set that contains measurements for X and Y

                    </li>
                    <li>We can then estimate the value of ùõº that minimizes the variance of our investment using

                    </li>
                    $\hat{\alpha}=\frac{\hat{\alpha_Y}^2-\hat{\alpha_{XY}}}{\hat{\alpha_X}^2+\hat{\alpha_Y}^2-\hat2\alpha_{XY}}$
                </ul>
            </section>

            <section>
                <h2>A Simple Example‚Äî3</h2>
                <img src="img/boot_simu.png" alt="" width="50%">
                <ul style="font-size:   smaller;">
                    <li>Each panel displays 100 simulated returns for investments X and Y. From left to right
                        and top to bottom, the resulting estimates are ùõº are 0.576, 0.532, 0.657, and 0.651
                    </li>
                </ul>
            </section>

            <section>
                <h2>Example Continued‚Äî4</h2>
                <ul>
                    <li>To estimate the standard deviation of $\hat{\alpha}$, we repeated the process of simulating 100
                        paired observations of X and Y, and estimating $\alpha$ 1,000 times
                    </li>
                    <li>We thereby obtained 1,000 estimates for ùõº, which we can call
                        $\hat{\alpha_1},\hat{\alpha_2}...\hat{\alpha_{100}}$</li>
                    <li>For these simulations the parameters were set to $\alpha_x^2=1, \alpha_Y^2=1.25$ and
                        $\alpha_{XY}=0.5$, and so we know that the true value of $\alpha$ is 0.6 (indicated by the red
                        line in the graph in a few slides)

                    </li>
                </ul>
            </section>

            <section>
                <h2>Example Continued‚Äî5 </h2>
                <ul>
                    <li>The mean over all 1,000 estimates for ùõº is very close to $\alpha$ =0.6, and the standard
                        deviation of the estimates is </li>
                    <ul>$Average=\bar{\alpha}=\frac{1}{1000}\sum_{r=1}^{1000}=\hat{\alpha_r}=0.5996$</ul>
                    <ul>$Standard$ $deviation
                        =\sqrt{\frac{1}{1000}\sum_{r=1}^{1000}(\hat{\alpha_r}-\bar{\alpha})^2}=0.083$</ul>

                    <li>This gives us a very good idea of the accuracy of $\hat{\alpha}:SE(\hat{\alpha})\approx0.083$
                    </li>
                    <li>So roughly speaking, for a random sample from the population, we would expect $\alpha$ to differ
                        from ùõº by approximately 0.08, on average
                    </li>
                </ul>
            </section>

            <section>
                <img src="img/boot_hist.png" alt="" width="50%;">
            </section>

            <section>
                <h2>Conceptualizing Bootstrap</h2>
                <ul style="font-size: smaller;">
                    <li>In reality, we do not know what the true population is. Therefore, we cannot apply the outline
                        above. We cannot generate new samples from the original population
                    </li>
                    <li>However, the bootstrap approach allows us to use a computer to mimic the process of obtaining
                        new data sets, so that we can estimate the variability of our estimate without generating
                        additional samples
                    </li>
                    <li>Rather than repeatedly obtaining independent data sets from the population, we instead obtain
                        distinct data sets by repeatedly sampling observations from the original data set with
                        replacement
                    </li>
                    <li>Each of these ‚Äúbootstrap data sets‚Äù is created by sampling <emph>with replacement</emph>, and is
                        the same
                        size as our original dataset. As a result some observations may appear more than once in a given
                        bootstrap data set and some not at all
                    </li>
                </ul>
            </section>

            <section>
                <h2>Example With Just 3 Observations‚Äî1 </h2>
                <div class="twocol" style="width: 50%; vertical-align: middle;">
                    <img src="img/boot_small.png" alt="">
                </div>
                <div class="twocol" style="width: 45%; vertical-align: middle;">
                    <ul style="font-size: 80%;">
                        <li>A graphical illustration of the bootstrap approach on a small sample containing n=3
                            observations
                        </li>
                        <li>Each bootstrap data set contains n observations, sampled with replacement from the original
                            data set
                        </li>
                        <li>Each bootstrap data set is used is used to obtain an estimate of $\alpha$
                        </li>
                    </ul>
                </div>

            </section>

            <section>
                <h2>Example With Just 3 Observations‚Äî2</h2>

                <ul style="font-size: smaller;">
                    <li>Denoting the first bootstrap data set by $Z^{*1}$, we use $Z^{*1}$, to produce a new
                        bootstrap estimate for $\alpha$, which we call $\hat{\alpha^{*1}}$
                    </li>
                    <li>This procedure is repeated B times for some large value of B (say 1000 or 10,000), in order
                        to produce B different bootstrap data sets, $Z^{*1},Z^{*2},Z^{*B} $, and B corresponding
                        $\alpha$ estimates, $\hat{\alpha^{*1}},\hat{\alpha^{*2}},\hat{\alpha^{*B}}$
                    </li>
                    <li>We estimate the standard error of these bootstrap estimates using the formula
                    </li>
                    <ul>$SE_B
                        (\hat{\alpha})=\sqrt{\frac{1}{B-1}\sum_{r=1}^{B}(\hat{\alpha}^{*r}-\bar{\hat{\alpha}}^*)^2}$
                    </ul>
                    <li>This serves as an estimate of the standard error of $\hat{\alpha}$ estimated from the
                        original data set. In the figure, bootstrap results are in blue. For this example $SE_b
                        (\hat{\alpha})=0.087$
                    </li>
                </ul>
            </section>

            <section>
                <iframe
                    src="https://embed.polleverywhere.com/multiple_choice_polls/tV2IZt5Tu9cfCa1ze0aR5?controls=none&short_poll=true"
                    width="1024px" height="768px"></iframe>
            </section>

            <section>
                <iframe
                    src="https://embed.polleverywhere.com/multiple_choice_polls/X70az350QYwExUqBe8CE6?controls=none&short_poll=true"
                    width="1024px" height="768px"></iframe>
            </section>

            <section>
                <h2>A General Picture for the Bootstrap</h2>
                <img src="img/boot_general.png" alt="">
            </section>

            <section>
                <h2>The Bootstrap in General</h2>
                <ul>
                    <li> In more complex data situations, figuring out the appropriate way to generate bootstrap samples
                        can require some thought
                    </li>
                    <li>For example, if the data is a time series, we cannot simply sample the observations with
                        replacement (why not?)
                    </li>
                    <li>We can instead create blocks of consecutive observations, and sample those with replacements.
                        Then we paste together sampled blocks to obtain a bootstrap dataset
                    </li>

                </ul>
            </section>

            <section>
                <h2>Other Uses of the Bootstrap</h2>
                <div class="twocol" style="width: 55%; vertical-align: middle;">
                    <ul style="font-size: x-large;">
                        <li>Primarily used to obtain standard errors of an estimate
                        </li>
                        <li>Also provides approximate confidence intervals for a population parameter. For example,
                            looking at the histogram, the 5% and 95% quantiles of the 1000 values is (0.43, 0.72)
                        </li>
                        <ul>
                            <li>This represents an approximate 90% confidence interval for the true $\alpha$
                            </li>
                        </ul>
                        <li>How do we interpret this confidence interval?
                        </li>
                        <li>The above interval is called a <emph>Bootstrap Percentile</emph> confidence interval. It is
                            the simplest
                            method (among many approaches for obtaining a confidence interval from the bootstrap.
                        </li>
                    </ul>
                </div>
                <div class="twocol" style="width: 40%; vertical-align: middle;">
                    <img src="img/boot_other_use.png" alt="">
                </div>
            </section>

            <section>
                <h2>Results</h2>
                <img src="img/boot_simu_comparison.png" alt="">
                <ul style="font-size: 80%;">
                    <li>Left: A histogram of the estimates of ùõº obtained by generating 1,000 simulated data sets
                        from the true population.
                    </li>
                    <li>Center: A histogram of the estimates of ùõº obtained from 1,000 bootstrap samples from a
                        single data set.
                    </li>
                    <li>Right: The estimates of ùõº displayed in the left and center panels are shown as boxplots. In
                        each panel, the pink line indicates the true value of $\alpha$
                    </li>
                </ul>
            </section>

            <section>
                <h3>Can the Bootstrap Estimate Prediction Error?</h3>
                <ul style="font-size: 80%;">
                    <li>In cross-validation, each of the ùêæ validation folds is distinct from the other ùêæ‚àí1 folds used
                        for training: there is no overlap. This is crucial for its success. Why?
                    </li>
                    <li>To estimate prediction error using the bootstrap, we could think about using each bootstrap
                        dataset as our training sample, and the original sample as our validation sample.

                    </li>
                    <li>But each bootstrap sample has significant overlap with the original data. About two-thirds of
                        the original data points appear in each bootstrap sample</li>
                    <li>This will cause the bootstrap to seriously underestimate the true prediction error. Why?
                    </li>
                    <li>The other way around ‚Äì with original sample=training sample, bootstrap dataset=validation sample
                        ‚Äì is worse!
                    </li>
                </ul>
            </section>

            <section>
                <h2>Removing the Overlap</h2>
                <ul>
                    <li>In cross-validation, each of the ùêæ validation folds is distinct from the other ùêæ‚àí1 folds used
                        for training: there is no overlap. This is crucial for its success. Why?
                    </li>

                    <li>But the method gets complicated, and in the end, cross-validation provides a simpler, more
                        attractive approach for estimating prediction error
                    </li>

                </ul>
            </section>

            <section>
                <h3>The Bootstrap Versus Permutation Tests‚Äì1 </h3>
                <ul style="font-size: 80%;">
                    <li>The bootstrap samples from the estimated population, and uses the results to estimate standard
                        errors and confidence intervals


                    </li>
                    <li>Permutation methods sample from an estimated null distribution for the data and use this to
                        estimate p-values and False Discovery Rates for hypothesis tests


                    </li>
                    <li>The bootstrap can be used to test a null hypothesis in simple situations e.g. if ùúÉ=0 is the
                        null hypothesis, we check whether the confidence interval for ùúÉ contains zero
                    </li>
                    <li>Can also adapt the bootstrap to sample from a null distribution but there‚Äôs no real advantage
                        over permutations

                    </li>

                </ul>
            </section>

            <section>
                <h2>The Bootstrap Versus Permutation Tests‚Äì2</h2>
                <img src="img/permu_test.png" alt="">
            </section>

            <section>
                <h2>Permutation Test in Two Sample Mean</h2>
                <ul>
                    <li>Null hypothesis: same means frmo two groups, say A and B</li>
                    <li>Two sample t-test: distribution assumptions</li>
                    <li>Permutation test:
                        <ul>
                            <li>Under null, data points are exchangeable</li>
                            <li>Calculate the mean difference under the observed labels, $D_o$</li>
                            <li>Random permute the labels, calculate the mean diff for each permutation, <emph>lots of
                                    them</emph>, to capture the null distribution
                            </li>
                            <li>Determine how extrame $D_o$ is under the null distribution, e.g. % of permutations that
                                yield higher or lower mean diff values</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section>
                <h2>Permutation vs Bootstrap</h2>
                <ul>
                    <li>Both are nonparametric</li>
                    <li>Bootstrap samples from the original, permutation test rearrange</li>
                    <li>Permutation mainly for testing, bootstrap for a wide range of (more complex) inference problems
                    </li>
                    <li>Permutation relies on exchangeability</li>
                    <li>Permutation computationally heavier</li>
                </ul>
            </section>
            <section>
                <h2>Bootstrap Summary</h2>
                <ul>
                    <li>Most commonly used to provide a measure of accuracy of a parameter estimate or of a given
                        learning method
                    </li>
                </ul>
            </section>

            <section>
                <iframe
                    src="https://embed.polleverywhere.com/multiple_choice_polls/FwZCBZ8GO2gJ0ScNp8p5J?controls=none&short_poll=true"
                    width="1024px" height="768px"></iframe>
            </section>

        </div>
    </div>

    <script src="reveal.js/dist/reveal.js"></script>
    <script src="reveal.js/plugin/zoom/zoom.js"></script>
    <script src="reveal.js/plugin/notes/notes.js"></script>
    <script src="reveal.js/plugin/search/search.js"></script>
    <script src="reveal.js/plugin/markdown/markdown.js"></script>
    <script src="reveal.js/plugin/highlight/highlight.js"></script>
    <script src="reveal.js/plugin/math/math.js"></script>

    <script>
        // Also available as an ES module, see:
        // https://revealjs.com/initialization/
        Reveal.initialize({
            controls: false,
            progress: true,
            center: true,
            hash: true,
            transition: 'slide', // none/fade/slide/convex/concave/zoom

            width: 1024,
            height: 768,

            slideNumber: 'c/t',

            pdfSeparateFragments: false,

            math: {
                // mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                config: 'TeX-AMS_HTML-full',
                TeX: {
                    Macros: {
                        R: '\\mathbb{R}',
                        set: ['\\left\\{#1 \\; ; \\; #2\\right\\}', 2]
                    }
                }
            },

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealMath, RevealHighlight]
        });

    </script>

</body>

</html>